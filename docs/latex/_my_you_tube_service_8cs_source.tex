\doxysection{My\+You\+Tube\+Service.\+cs}
\hypertarget{_my_you_tube_service_8cs_source}{}\label{_my_you_tube_service_8cs_source}\index{Models/MyYouTubeService.cs@{Models/MyYouTubeService.cs}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00001}00001\ \textcolor{keyword}{using\ }YouTubeMusicAPI.Client;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00002}00002\ \textcolor{keyword}{using\ }YouTubeMusicAPI.Models;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00003}00003\ \textcolor{keyword}{using\ }YoutubeExplode;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00004}00004\ \textcolor{keyword}{using\ }YoutubeExplode.Videos.Streams;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00005}00005\ \textcolor{keyword}{using\ }Google;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00006}00006\ \textcolor{keyword}{using\ }Google.Apis.Auth.OAuth2;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00007}00007\ \textcolor{keyword}{using\ }Google.Apis.Services;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00008}00008\ \textcolor{keyword}{using\ }Google.Apis.Util.Store;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00009}00009\ \textcolor{keyword}{using\ }Google.Apis.YouTube.v3;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00010}00010\ \textcolor{keyword}{using\ }Google.Apis.YouTube.v3.Data;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00011}00011\ \textcolor{keyword}{using\ }System.IO;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00012}00012\ \textcolor{keyword}{using\ }System.Windows;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00013}00013\ \textcolor{keyword}{using\ }System.Collections.ObjectModel;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00014}00014\ \textcolor{keyword}{using\ }YouTubeMusicAPI.Models.Shelf;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00015}00015\ \textcolor{keyword}{using\ }YouTubeMusicAPI.Types;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00016}00016\ \textcolor{keyword}{using\ }YouTubeMusicAPI.Models.Info;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00018}00018\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_music_app_1_1_models}{MusicApp.Models}}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00019}00019\ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00023}\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service}{00023}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service}{MyYouTubeService}}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00024}00024\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00025}00025\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{static}\ readonly\ \textcolor{keywordtype}{string}[]\ Scopes\ =\ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00026}00026\ \ \ \ \ \ \ \ \ \ \ \ \ YouTubeService.Scope.Youtube,}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00027}00027\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}https://www.googleapis.com/auth/youtube.force-\/ssl"{}}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00028}00028\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00029}00029\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{static}\ readonly\ \textcolor{keywordtype}{string}\ ApplicationName\ =\ \textcolor{stringliteral}{"{}MusicApp"{}};}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00030}00030\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{static}\ YouTubeService\ \_googleYouTubeService\ =\ \textcolor{keyword}{new}();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00032}00032\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{static}\ YouTubeMusicClient\ \_youtubeMusicClient\ =\ \textcolor{keyword}{new}();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00033}00033\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{static}\ YoutubeClient\ \_youtubeClient\ =\ \textcolor{keyword}{new}();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00034}00034\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00039}\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_ad79f98aad466fe67265f1ecf3a8e14c6}{00039}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ async\ Task<MyYouTubeService>\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_ad79f98aad466fe67265f1ecf3a8e14c6}{CreateYoutubeServiceAsync}}()}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00040}00040\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00041}00041\ \ \ \ \ \ \ \ \ \ \ \ \ var\ service\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service}{MyYouTubeService}}();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00042}00042\ \ \ \ \ \ \ \ \ \ \ \ \ service.InitializeYoutubeClients();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00043}00043\ \ \ \ \ \ \ \ \ \ \ \ \ await\ service.InitializeGoogleYTService();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00044}00044\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ service;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00045}00045\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00046}00046\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00050}\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a1b0f586ef1f823610ffe7cda3dd3dfa9}{00050}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a1b0f586ef1f823610ffe7cda3dd3dfa9}{InitializeYoutubeClients}}()}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00051}00051\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00052}00052\ \ \ \ \ \ \ \ \ \ \ \ \ \_youtubeMusicClient\ =\ \textcolor{keyword}{new}\ YouTubeMusicClient();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00053}00053\ \ \ \ \ \ \ \ \ \ \ \ \ \_youtubeClient\ =\ \textcolor{keyword}{new}\ YoutubeClient();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00054}00054\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00055}00055\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00059}\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a1894c54a58ab46e6fe098d2a13d7a96a}{00059}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}\ async\ Task\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a1894c54a58ab46e6fe098d2a13d7a96a}{InitializeGoogleYTService}}()}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00060}00060\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00061}00061\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00062}00062\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00063}00063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ credPath\ =\ \textcolor{stringliteral}{"{}token.json"{}};}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00065}00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ UserCredential\ credential;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00066}00066\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00067}00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{using}\ (var\ stream\ =\ \textcolor{keyword}{new}\ FileStream(\textcolor{stringliteral}{"{}credentials.json"{}},\ FileMode.Open,\ FileAccess.Read))}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00068}00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00069}00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ credential\ =\ await\ GoogleWebAuthorizationBroker.AuthorizeAsync(}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00070}00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GoogleClientSecrets.FromStream(stream).Secrets,}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00071}00071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Scopes,}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00072}00072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}user"{}},}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00073}00073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CancellationToken.None,}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00074}00074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ FileDataStore(credPath,\ \textcolor{keyword}{true}));}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00075}00075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00076}00076\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00077}00077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Create\ YouTube\ Service}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00078}00078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_googleYouTubeService\ =\ \textcolor{keyword}{new}\ YouTubeService(\textcolor{keyword}{new}\ BaseClientService.Initializer()}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00079}00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00080}00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ HttpClientInitializer\ =\ credential,}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00081}00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ApplicationName\ =\ ApplicationName}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00082}00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00083}00083\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00084}00084\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00085}00085\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00086}00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MessageBox.Show(\textcolor{stringliteral}{"{}Failed\ to\ connect\ to\ Google\ YouTube\ API"{}});}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00087}00087\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00088}00088\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00089}00089\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00096}\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a8789eb0f0e5276b2cf58e4eacfb0ed46}{00096}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ async\ Task<MyShelf<MySong>?>\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a8789eb0f0e5276b2cf58e4eacfb0ed46}{FetchSongShelvesAsync}}(\textcolor{keywordtype}{string}\ query,\ \textcolor{keywordtype}{string}?\ continuationToken)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00097}00097\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00098}00098\ \ \ \ \ \ \ \ \ \ \ \ \ IEnumerable<Shelf>\ shelves\ =\ await\ \_youtubeMusicClient.SearchAsync(query,\ continuationToken,\ ShelfKind.Songs);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00099}00099\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00100}00100\ \ \ \ \ \ \ \ \ \ \ \ \ List<Song>\ songs\ =\ shelves.SelectMany(shelf\ =>\ shelf.Items).OfType<Song>().ToList();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00101}00101\ \ \ \ \ \ \ \ \ \ \ \ \ continuationToken\ =\ shelves.FirstOrDefault()?.NextContinuationToken;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00102}00102\ \ \ \ \ \ \ \ \ \ \ \ \ var\ mySongs\ =\ await\ Task.WhenAll(songs.Select(async\ song\ =>\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_song}{MySong}}.\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_song_a7e0f378fa4b2763bd77a6b37e91c7cbf}{Create}}(song)));}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00103}00103\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00104}00104\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_shelf}{MyShelf<MySong>}}(\textcolor{keyword}{new}\ ObservableCollection<MySong>(mySongs),\ continuationToken);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00105}00105\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00106}00106\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00113}\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a970433df35cd99f8be2de1beed902328}{00113}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ async\ Task<ObservableCollection<MySong>>\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a970433df35cd99f8be2de1beed902328}{FetchSongsAsync}}(\textcolor{keywordtype}{string}\ query,\ \textcolor{keywordtype}{int}\ count)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00114}00114\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00115}00115\ \ \ \ \ \ \ \ \ \ \ \ \ IEnumerable<Song>\ songs\ =\ await\ \_youtubeMusicClient.SearchAsync<Song>(query,\ count);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00116}00116\ \ \ \ \ \ \ \ \ \ \ \ \ var\ mySongs\ =\ await\ Task.WhenAll(songs.Select(async\ song\ =>\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_song}{MySong}}.\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_song_a7e0f378fa4b2763bd77a6b37e91c7cbf}{Create}}(song)));}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00117}00117\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ ObservableCollection<MySong>(mySongs);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00118}00118\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00119}00119\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00125}\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a48d08c2d4b1eb1a19a7403723c6c576e}{00125}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ async\ Task<MySong?>\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a48d08c2d4b1eb1a19a7403723c6c576e}{FetchSongAsync}}(\textcolor{keywordtype}{string}\ query)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00126}00126\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00127}00127\ \ \ \ \ \ \ \ \ \ \ \ \ IEnumerable<Song>\ songs\ =\ await\ \_youtubeMusicClient.SearchAsync<Song>(query,\ 1);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00128}00128\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!songs.Any())\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{null};}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00129}00129\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00130}00130\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_song}{MySong}}.\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_song_a7e0f378fa4b2763bd77a6b37e91c7cbf}{Create}}(songs.FirstOrDefault());}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00131}00131\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00132}00132\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00138}\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a60f6019ea381561f8bfadea92afd0a55}{00138}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ async\ Task<string?>\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a60f6019ea381561f8bfadea92afd0a55}{GetAudioStreamUrlAsync}}(\textcolor{keywordtype}{string}\ songId)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00139}00139\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00140}00140\ \ \ \ \ \ \ \ \ \ \ \ \ var\ videoId\ =\ YoutubeExplode.Videos.VideoId.Parse(songId);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00141}00141\ \ \ \ \ \ \ \ \ \ \ \ \ var\ streamManifest\ =\ await\ \_youtubeClient.Videos.Streams.GetManifestAsync(videoId);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00142}00142\ \ \ \ \ \ \ \ \ \ \ \ \ var\ audioStreamInfo\ =\ streamManifest.GetAudioOnlyStreams().GetWithHighestBitrate();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00143}00143\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ audioStreamInfo?.Url;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00144}00144\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00145}00145\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00150}\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a28a88ac12789212fff6c7dd5a7bd8c78}{00150}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ async\ Task<ObservableCollection<Playlist>>\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a28a88ac12789212fff6c7dd5a7bd8c78}{FetchAllPlaylistsAsync}}()}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00151}00151\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00152}00152\ \ \ \ \ \ \ \ \ \ \ \ \ var\ playlists\ =\ \textcolor{keyword}{new}\ List<Playlist>();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00153}00153\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}?\ nextPageToken\ =\ \textcolor{keyword}{null};}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00154}00154\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00155}00155\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00156}00156\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00157}00157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00158}00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00159}00159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ request\ =\ \_googleYouTubeService.Playlists.List(\textcolor{stringliteral}{"{}snippet"{}});}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00160}00160\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ request.Mine\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00161}00161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ request.MaxResults\ =\ 10;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00162}00162\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ request.PageToken\ =\ nextPageToken;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00163}00163\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00164}00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ response\ =\ await\ request.ExecuteAsync();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00165}00165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ playlists.AddRange(response.Items);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00166}00166\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nextPageToken\ =\ response.NextPageToken;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00167}00167\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00168}00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (nextPageToken\ !=\ \textcolor{keyword}{null});}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00169}00169\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00170}00170\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (GoogleApiException\ ex)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00171}00171\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00172}00172\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MessageBox.Show(\$\textcolor{stringliteral}{"{}An\ API\ error\ occurred:\ \{ex.Message\}"{}});}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00173}00173\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00174}00174\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (Exception\ ex)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00175}00175\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00176}00176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MessageBox.Show(\$\textcolor{stringliteral}{"{}An\ error\ occurred:\ \{ex.Message\}"{}});}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00177}00177\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00178}00178\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00179}00179\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ ObservableCollection<Playlist>(playlists);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00180}00180\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00181}00181\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00187}\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a32e5c97ef31169facc49e8b1904c05c7}{00187}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ async\ Task<SongVideoInfo>\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a32e5c97ef31169facc49e8b1904c05c7}{FetchSongVideoInfoAsync}}(\textcolor{keywordtype}{string}\ songId)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00188}00188\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00189}00189\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ await\ \_youtubeMusicClient.GetSongVideoInfoAsync(songId);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00190}00190\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00191}00191\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00197}\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a1309c3b7e94c58ce8a8c33c0cdaf2ea0}{00197}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ async\ Task<ObservableCollection<MySong>?>\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a1309c3b7e94c58ce8a8c33c0cdaf2ea0}{FetchPlaylistContentAsync}}(\textcolor{keywordtype}{string}\ playlistId)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00198}00198\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00199}00199\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00200}00200\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00201}00201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ request\ =\ \_googleYouTubeService.PlaylistItems.List(\textcolor{stringliteral}{"{}snippet,contentDetails"{}});}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00202}00202\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ request.PlaylistId\ =\ playlistId;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00203}00203\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ request.MaxResults\ =\ 200;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00204}00204\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00205}00205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ response\ =\ await\ request.ExecuteAsync();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00206}00206\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00207}00207\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ tasks\ =\ response.Items.Select(async\ item\ =>}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00208}00208\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00209}00209\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ itemInfo\ =\ await\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a32e5c97ef31169facc49e8b1904c05c7}{FetchSongVideoInfoAsync}}(item.ContentDetails.VideoId);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00210}00210\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ song\ =\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_song}{MySong}}.\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_song_a7e0f378fa4b2763bd77a6b37e91c7cbf}{Create}}(itemInfo);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00211}00211\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ song;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00212}00212\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00213}00213\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00214}00214\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ playlistSongs\ =\ await\ Task.WhenAll(tasks);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00215}00215\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ ObservableCollection<MySong>(playlistSongs);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00216}00216\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00217}00217\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (GoogleApiException\ ex)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00218}00218\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00219}00219\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MessageBox.Show(\$\textcolor{stringliteral}{"{}An\ API\ error\ occurred:\ \{ex.Message\}"{}},\ \textcolor{stringliteral}{"{}Error"{}},\ MessageBoxButton.OK,\ MessageBoxImage.Error);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00220}00220\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{null};}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00221}00221\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00222}00222\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00223}00223\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (Exception\ ex)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00224}00224\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00225}00225\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MessageBox.Show(\$\textcolor{stringliteral}{"{}An\ error\ occurred:\ \{ex.Message\}"{}},\ \textcolor{stringliteral}{"{}Error"{}},\ MessageBoxButton.OK,\ MessageBoxImage.Error);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00226}00226\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{null};}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00227}00227\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00228}00228\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00229}00229\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00236}\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a6bf07c8e3502346c0608697f5d11e5c0}{00236}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ async\ Task\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a6bf07c8e3502346c0608697f5d11e5c0}{AddNewPlaylist}}(\textcolor{keywordtype}{string}\ title,\ \textcolor{keywordtype}{string}?\ description\ =\ \textcolor{keyword}{null},\ \textcolor{keywordtype}{string}\ privacyStatus\ =\ \textcolor{stringliteral}{"{}private"{}})}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00237}00237\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00238}00238\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00239}00239\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00240}00240\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ newPlaylist\ =\ \textcolor{keyword}{new}\ Playlist}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00241}00241\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00242}00242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Snippet\ =\ \textcolor{keyword}{new}\ PlaylistSnippet}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00243}00243\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00244}00244\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Title\ =\ title,}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00245}00245\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Description\ =\ description\ ??\ \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00246}00246\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00247}00247\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Status\ =\ \textcolor{keyword}{new}\ PlaylistStatus}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00248}00248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00249}00249\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PrivacyStatus\ =\ privacyStatus\ ==\ \textcolor{stringliteral}{"{}public"{}}\ ?\ \textcolor{stringliteral}{"{}public"{}}\ :\ \textcolor{stringliteral}{"{}private"{}}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00250}00250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00251}00251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00252}00252\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00253}00253\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ request\ =\ \_googleYouTubeService.Playlists.Insert(newPlaylist,\ \textcolor{stringliteral}{"{}snippet,status"{}});}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00254}00254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ response\ =\ await\ request.ExecuteAsync();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00255}00255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MessageBox.Show(\$\textcolor{stringliteral}{"{}New\ playlist\ created.\ Title:\ \{response.Snippet.Title\},\ PlaylistId:\ \{response.Id\}"{}},\ \textcolor{stringliteral}{"{}Playlist\ Created"{}},\ MessageBoxButton.OK,\ MessageBoxImage.Information);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00256}00256\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00257}00257\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (GoogleApiException\ ex)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00258}00258\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00259}00259\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MessageBox.Show(\$\textcolor{stringliteral}{"{}An\ API\ error\ occurred:\ \{ex.Message\}\(\backslash\)n\{ex.Error.Message\}"{}},\ \textcolor{stringliteral}{"{}Error"{}},\ MessageBoxButton.OK,\ MessageBoxImage.Error);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00260}00260\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00261}00261\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (Exception\ ex)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00262}00262\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00263}00263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MessageBox.Show(\$\textcolor{stringliteral}{"{}An\ error\ occurred:\ \{ex.Message\}"{}},\ \textcolor{stringliteral}{"{}Error"{}},\ MessageBoxButton.OK,\ MessageBoxImage.Error);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00264}00264\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00265}00265\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00266}00266\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00271}\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_ab752689ea1f6cfddcb05d8da9c37f79d}{00271}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ async\ Task\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_ab752689ea1f6cfddcb05d8da9c37f79d}{DeletePlaylistAsync}}(\textcolor{keywordtype}{string}\ playlistId)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00272}00272\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00273}00273\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00274}00274\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00275}00275\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ request\ =\ \_googleYouTubeService.Playlists.Delete(playlistId);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00276}00276\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ await\ request.ExecuteAsync();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00277}00277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MessageBox.Show(\$\textcolor{stringliteral}{"{}Playlist\ with\ ID\ \{playlistId\}\ deleted."{}},\ \textcolor{stringliteral}{"{}Playlist\ Deleted"{}},\ MessageBoxButton.OK,\ MessageBoxImage.Information);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00278}00278\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00279}00279\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (GoogleApiException\ ex)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00280}00280\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00281}00281\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MessageBox.Show(\$\textcolor{stringliteral}{"{}An\ API\ error\ occurred:\ \{ex.Message\}"{}},\ \textcolor{stringliteral}{"{}Error"{}},\ MessageBoxButton.OK,\ MessageBoxImage.Error);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00282}00282\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00283}00283\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (Exception\ ex)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00284}00284\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00285}00285\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MessageBox.Show(\$\textcolor{stringliteral}{"{}An\ error\ occurred:\ \{ex.Message\}"{}},\ \textcolor{stringliteral}{"{}Error"{}},\ MessageBoxButton.OK,\ MessageBoxImage.Error);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00286}00286\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00287}00287\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00288}00288\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00294}\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a0d27b493d405e4861250edf108fce7fc}{00294}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ async\ Task\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a0d27b493d405e4861250edf108fce7fc}{AddSongToPlaylist}}(Playlist\ playlist,\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_song}{MySong}}\ song)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00295}00295\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00296}00296\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00297}00297\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00298}00298\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ newPlaylistItem\ =\ \textcolor{keyword}{new}\ PlaylistItem}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00299}00299\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00300}00300\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Snippet\ =\ \textcolor{keyword}{new}\ PlaylistItemSnippet}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00301}00301\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00302}00302\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PlaylistId\ =\ playlist.Id,}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00303}00303\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ResourceId\ =\ \textcolor{keyword}{new}\ ResourceId}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00304}00304\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00305}00305\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Kind\ =\ \textcolor{stringliteral}{"{}youtube\#video"{}},}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00306}00306\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ VideoId\ =\ song.Id}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00307}00307\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00308}00308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00309}00309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00310}00310\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00311}00311\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ request\ =\ \_googleYouTubeService.PlaylistItems.Insert(newPlaylistItem,\ \textcolor{stringliteral}{"{}snippet"{}});}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00312}00312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ await\ request.ExecuteAsync();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00313}00313\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00314}00314\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (Exception\ ex)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00315}00315\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00316}00316\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MessageBox.Show(\$\textcolor{stringliteral}{"{}Failed\ to\ add\ song\ to\ playlist:\ \{ex.Message\}"{}});}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00317}00317\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00318}00318\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00319}00319\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00325}\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_ab418a11403d47f91dd59497557322c83}{00325}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ async\ Task\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_ab418a11403d47f91dd59497557322c83}{RemoveSongFromPlaylist}}(Playlist\ playlist,\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_song}{MySong}}\ song)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00326}00326\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00327}00327\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00328}00328\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00329}00329\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}?\ nextPageToken\ =\ \textcolor{keyword}{null};}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00330}00330\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PlaylistItem?\ playlistItem\ =\ \textcolor{keyword}{null};}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00331}00331\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00332}00332\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Loop\ through\ pages\ of\ playlist\ items\ until\ we\ find\ the\ song}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00333}00333\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00334}00334\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00335}00335\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ playlistItemsRequest\ =\ \_googleYouTubeService.PlaylistItems.List(\textcolor{stringliteral}{"{}id,snippet"{}});}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00336}00336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ playlistItemsRequest.PlaylistId\ =\ playlist.Id;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00337}00337\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ playlistItemsRequest.MaxResults\ =\ 20;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00338}00338\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ playlistItemsRequest.PageToken\ =\ nextPageToken;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00339}00339\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00340}00340\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ playlistItemsResponse\ =\ await\ playlistItemsRequest.ExecuteAsync();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00341}00341\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00342}00342\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ playlistItem\ =\ playlistItemsResponse.Items}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00343}00343\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .FirstOrDefault(item\ =>\ item.Snippet.ResourceId.VideoId\ ==\ song.\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_song_a9781a34d885380722f23ca9f9b477e4b}{Id}});}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00344}00344\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00345}00345\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nextPageToken\ =\ playlistItemsResponse.NextPageToken;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00346}00346\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00347}00347\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (playlistItem\ ==\ \textcolor{keyword}{null}\ \&\&\ !\textcolor{keywordtype}{string}.IsNullOrEmpty(nextPageToken));}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00348}00348\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00349}00349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ the\ song\ is\ found\ in\ the\ playlist,\ delete\ it}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00350}00350\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (playlistItem\ !=\ \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00351}00351\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00352}00352\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ deleteRequest\ =\ \_googleYouTubeService.PlaylistItems.Delete(playlistItem.Id);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00353}00353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ await\ deleteRequest.ExecuteAsync();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00354}00354\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00355}00355\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00356}00356\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00357}00357\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MessageBox.Show(\textcolor{stringliteral}{"{}Song\ not\ found\ in\ the\ playlist."{}});}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00358}00358\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00359}00359\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00360}00360\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (Exception\ ex)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00361}00361\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00362}00362\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MessageBox.Show(\$\textcolor{stringliteral}{"{}Failed\ to\ remove\ song\ from\ playlist:\ \{ex.Message\}"{}});}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00363}00363\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00364}00364\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00365}00365\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00371}\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a4c24bd643c1c277ef09ea5d9b2d8f0d4}{00371}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ async\ Task<MyShelf<MySong>>\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a4c24bd643c1c277ef09ea5d9b2d8f0d4}{FetchPopularSongsAsync}}(\textcolor{keywordtype}{string}?\ nextPageToken)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00372}00372\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00373}00373\ \ \ \ \ \ \ \ \ \ \ \ \ var\ trendingVideosRequest\ =\ \_googleYouTubeService.Videos.List(\textcolor{stringliteral}{"{}snippet"{}});}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00374}00374\ \ \ \ \ \ \ \ \ \ \ \ \ trendingVideosRequest.Chart\ =\ VideosResource.ListRequest.ChartEnum.MostPopular;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00375}00375\ \ \ \ \ \ \ \ \ \ \ \ \ trendingVideosRequest.RegionCode\ =\ \textcolor{stringliteral}{"{}US"{}};}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00376}00376\ \ \ \ \ \ \ \ \ \ \ \ \ trendingVideosRequest.MaxResults\ =\ 20;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00377}00377\ \ \ \ \ \ \ \ \ \ \ \ \ trendingVideosRequest.VideoCategoryId\ =\ \textcolor{stringliteral}{"{}10"{}};}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00378}00378\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00379}00379\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nextPageToken\ !=\ \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00380}00380\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00381}00381\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ trendingVideosRequest.PageToken\ =\ nextPageToken;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00382}00382\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00383}00383\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00384}00384\ \ \ \ \ \ \ \ \ \ \ \ \ var\ trendingVideosResponse\ =\ await\ trendingVideosRequest.ExecuteAsync();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00385}00385\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00386}00386\ \ \ \ \ \ \ \ \ \ \ \ \ var\ songs\ =\ await\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a9ab698238b7c9d3ee6b6b03a820603ce}{ConvertToSongs}}(trendingVideosResponse);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00387}00387\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00388}00388\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ await\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_aa164d955eab2c8e767bac6ef1a12a1a5}{ConvertSongsToMySongsShelf}}(songs,\ trendingVideosResponse.NextPageToken);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00389}00389\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00390}00390\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00396}\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a465ed16eb7cf88a47d23ae006b907062}{00396}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ async\ Task<ObservableCollection<MySong>?>\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a465ed16eb7cf88a47d23ae006b907062}{FetchRadioSongsAsync}}(\textcolor{keywordtype}{string}\ radioPlaylistId)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00397}00397\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00398}00398\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00399}00399\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00400}00400\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ playlistBrowseId\ =\ \_youtubeMusicClient.GetCommunityPlaylistBrowseId(radioPlaylistId);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00401}00401\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CommunityPlaylistInfo\ playlist\ =\ await\ \_youtubeMusicClient.GetCommunityPlaylistInfoAsync(playlistBrowseId);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00402}00402\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00403}00403\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ result\ =\ \textcolor{keyword}{new}\ ObservableCollection<MySong>();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00404}00404\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00405}00405\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ tasks\ =\ playlist.Songs.Select(async\ playlistSong\ =>}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00406}00406\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00407}00407\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ song\ =\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_song}{MySong}}.\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_song_a7e0f378fa4b2763bd77a6b37e91c7cbf}{Create}}(playlistSong);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00408}00408\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result.Add(song);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00409}00409\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00410}00410\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00411}00411\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ await\ Task.WhenAll(tasks);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00412}00412\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00413}00413\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00414}00414\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00415}00415\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (Google.GoogleApiException\ ex)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00416}00416\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00417}00417\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MessageBox.Show(\$\textcolor{stringliteral}{"{}An\ API\ error\ occurred:\ \{ex.Message\}"{}},\ \textcolor{stringliteral}{"{}API\ Error"{}},\ MessageBoxButton.OK,\ MessageBoxImage.Error);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00418}00418\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00419}00419\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (Exception\ ex)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00420}00420\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00421}00421\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MessageBox.Show(\$\textcolor{stringliteral}{"{}An\ error\ occurred:\ \{ex.Message\}"{}},\ \textcolor{stringliteral}{"{}Error"{}},\ MessageBoxButton.OK,\ MessageBoxImage.Error);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00422}00422\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00423}00423\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00424}00424\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{null};}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00425}00425\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00426}00426\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00433}\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_aa164d955eab2c8e767bac6ef1a12a1a5}{00433}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}\ async\ Task<MyShelf<MySong>>\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_aa164d955eab2c8e767bac6ef1a12a1a5}{ConvertSongsToMySongsShelf}}(IEnumerable<Song>\ songs,\ \textcolor{keywordtype}{string}?\ nextPageToken)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00434}00434\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00435}00435\ \ \ \ \ \ \ \ \ \ \ \ \ var\ mySongs\ =\ await\ Task.WhenAll(songs.Select(async\ song\ =>\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_song}{MySong}}.\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_song_a7e0f378fa4b2763bd77a6b37e91c7cbf}{Create}}(song)));}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00436}00436\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_shelf}{MyShelf<MySong>}}(\textcolor{keyword}{new}\ ObservableCollection<MySong>(mySongs),\ nextPageToken);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00437}00437\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00438}00438\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00446}\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_aa00626e0db902d2da90c82840e465141}{00446}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}\ async\ Task<List<Song>>\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_aa00626e0db902d2da90c82840e465141}{ConvertToSongs<T>}}(IEnumerable<T>\ items,\ Func<T,\ string>\ getTitle)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00447}00447\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00448}00448\ \ \ \ \ \ \ \ \ \ \ \ \ var\ songs\ =\ \textcolor{keyword}{new}\ List<Song>();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00449}00449\ \ \ \ \ \ \ \ \ \ \ \ \ var\ tasks\ =\ items.Select(async\ item\ =>}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00450}00450\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00451}00451\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ title\ =\ getTitle(item);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00452}00452\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00453}00453\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IEnumerable<Song>\ searchResults\ =\ await\ \_youtubeMusicClient.SearchAsync<Song>(title,\ 1);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00454}00454\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ song\ =\ searchResults.FirstOrDefault();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00455}00455\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (song\ !=\ \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00456}00456\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00457}00457\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ songs.Add(song);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00458}00458\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00459}00459\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00460}00460\ \ \ \ \ \ \ \ \ \ \ \ \ \}).ToList();}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00461}00461\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00462}00462\ \ \ \ \ \ \ \ \ \ \ \ \ await\ Task.WhenAll(tasks);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00463}00463\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ songs;}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00464}00464\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00465}00465\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00471}\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a9ab698238b7c9d3ee6b6b03a820603ce}{00471}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}\ async\ Task<List<Song>>\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a9ab698238b7c9d3ee6b6b03a820603ce}{ConvertToSongs}}(VideoListResponse\ response)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00472}00472\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00473}00473\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ await\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a9ab698238b7c9d3ee6b6b03a820603ce}{ConvertToSongs}}(response.Items,\ video\ =>\ video.Snippet.Title);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00474}00474\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00475}00475\ }
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00481}\mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a927b457babff52a0482cb4495a41d801}{00481}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}\ async\ Task<List<Song>>\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a927b457babff52a0482cb4495a41d801}{ConvertToSongs}}(PlaylistItemListResponse\ response)}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00482}00482\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00483}00483\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ await\ \mbox{\hyperlink{class_music_app_1_1_models_1_1_my_you_tube_service_a9ab698238b7c9d3ee6b6b03a820603ce}{ConvertToSongs}}(response.Items,\ item\ =>\ item.Snippet.Title);}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00484}00484\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00485}00485\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_my_you_tube_service_8cs_source_l00486}00486\ \}}

\end{DoxyCode}
